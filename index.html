<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soul Calculator | Sweet Edition</title>
    
    <meta name="theme-color" content="#0f0c29">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="./icon.svg">
    <link rel="apple-touch-icon" href="./icon.svg">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="flex flex-col items-center min-h-screen">

    <div class="cosmic-void"></div>
    <div class="nebula"></div>

    <!-- Header / Nav -->
    <nav class="w-full max-w-2xl px-6 pt-6 flex justify-between items-center z-50">
        <div class="flex items-center gap-3">
            <button onclick="toggleMenu()" class="w-10 h-10 flex items-center justify-center bg-white/5 border border-white/10 rounded-xl active:scale-95 transition-transform">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" />
                </svg>
            </button>
            <h1 class="font-bold text-lg text-white tracking-widest stylish-font"><span class="text-[#00f3ff]">SOUL</span> CALC</h1>
        </div>
        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-[#00f3ff] to-[#bd00ff] p-[2px]">
            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="User" class="w-full h-full rounded-full bg-black">
        </div>
    </nav>

    <!-- Side Menu -->
    <div id="side-menu" class="fixed top-0 left-0 h-full w-80 bg-[#0f0c29]/95 backdrop-blur-xl border-r border-white/10 z-50 p-8 shadow-2xl overflow-y-auto">
        <div class="flex justify-between items-center mb-10 pt-4">
            <h2 class="text-xl font-bold text-fancy tracking-widest">INFO</h2>
            <button onclick="toggleMenu()" class="text-white/50 hover:text-white text-2xl">&times;</button>
        </div>
        <div class="space-y-2">
             <div>
                <div class="menu-header" onclick="toggleAccordion(this)">
                    <h3 class="text-[#00f3ff] text-xs font-bold uppercase tracking-[0.2em]">Details</h3>
                    <span class="text-white text-xl font-light">+</span>
                </div>
                <div class="menu-content">
                    <p class="text-sm text-white/70 leading-relaxed font-light">
                        ‚ÄúSoul Elements is a premium profiling ritual. It merges Elemental Traits, Zodiac Astrology, and Abjad Numerology.‚Äù
                    </p>
                </div>
            </div>
            <div>
                <div class="menu-header" onclick="toggleAccordion(this)">
                    <h3 class="text-[#ff0055] text-xs font-bold uppercase tracking-[0.2em]">Developer</h3>
                    <span class="text-white text-xl font-light">+</span>
                </div>
                <div class="menu-content">
                    <div class="space-y-1">
                        <p class="text-white font-bold text-lg stylish-font text-gold-premium">Muzammil Mahmood</p>
                        <p class="text-sm text-white/60">Software Engineer</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN APP CONTAINER -->
    <div class="w-full max-w-2xl px-4 relative z-10 mt-6 pb-24">

        <!-- === HOME DASHBOARD === -->
        <main id="home-view" class="fade-in">
            
            <!-- Featured Carousel -->
            <div class="carousel-container">
                <!-- Slide 1 -->
                <div class="slide-card group cursor-pointer" onclick="openApp('intro-view')">
                    <div class="slide-bg bg-gradient-to-r from-purple-600 to-blue-600"></div>
                    <span class="px-3 py-1 bg-white/10 backdrop-blur-md rounded-full text-[10px] text-white uppercase tracking-widest w-fit mb-2 border border-white/20">Featured</span>
                    <h3 class="text-2xl font-bold text-white mb-1">Discover Your Soul</h3>
                    <p class="text-sm text-white/70">Take the full elemental ritual analysis.</p>
                </div>
                <!-- Slide 2 -->
                <div class="slide-card group">
                    <div class="slide-bg bg-gradient-to-r from-pink-600 to-orange-500"></div>
                    <span class="px-3 py-1 bg-white/10 backdrop-blur-md rounded-full text-[10px] text-white uppercase tracking-widest w-fit mb-2 border border-white/20">Daily Cosmic</span>
                    <h3 class="text-2xl font-bold text-white mb-1">Energy Reading</h3>
                    <p class="text-sm text-white/70">Align your chakras for today.</p>
                </div>
            </div>

            <!-- Quick Actions Grid -->
            <h3 class="section-title">Cosmic Tools</h3>
            <div class="quick-grid">
                <!-- App 1: Soul Calculator -->
                <div class="app-icon-wrapper" onclick="openApp('intro-view')">
                    <div class="app-icon border-purple-500/30">
                        <span class="text-2xl">üîÆ</span>
                    </div>
                    <span class="app-label">Soul Calc</span>
                </div>
                
                <!-- App 2: Zodiac -->
                <div class="app-icon-wrapper">
                    <div class="app-icon border-blue-500/30">
                        <span class="text-2xl">‚ôà</span>
                    </div>
                    <span class="app-label">Horoscope</span>
                </div>

                <!-- App 3: Numerology -->
                <div class="app-icon-wrapper">
                    <div class="app-icon border-green-500/30">
                        <span class="text-2xl">üî¢</span>
                    </div>
                    <span class="app-label">Abjad</span>
                </div>

                <!-- App 4: Love Match -->
                <div class="app-icon-wrapper">
                    <div class="app-icon border-pink-500/30">
                        <span class="text-2xl">‚ù§Ô∏è</span>
                    </div>
                    <span class="app-label">Love</span>
                </div>

                <!-- App 5: Tarot -->
                <div class="app-icon-wrapper">
                    <div class="app-icon border-yellow-500/30">
                        <span class="text-2xl">üÉè</span>
                    </div>
                    <span class="app-label">Tarot</span>
                </div>
                 <!-- App 6: Settings -->
                 <div class="app-icon-wrapper">
                    <div class="app-icon border-white/30">
                        <span class="text-2xl">‚öôÔ∏è</span>
                    </div>
                    <span class="app-label">Settings</span>
                </div>
            </div>

            <!-- Recent Results Banner -->
            <h3 class="section-title">History</h3>
            <div class="bg-white/5 border border-white/10 rounded-2xl p-4 flex items-center justify-between">
                <div>
                    <p class="text-white font-bold">No recent rituals</p>
                    <p class="text-xs text-white/40">Your past results will appear here.</p>
                </div>
                <div class="w-8 h-8 rounded-full bg-white/10 flex items-center justify-center">
                    <span class="text-white/40">‚Üª</span>
                </div>
            </div>

        </main>

        <!-- === SUB-APPS (HIDDEN BY DEFAULT) === -->

        <!-- 0. REGISTRATION -->
        <main id="intro-view" class="hidden luxury-card rounded-3xl p-10 md:p-16 fade-in text-center mt-4">
            <button onclick="goHome()" class="absolute top-6 left-6 text-white/50 hover:text-white text-sm">‚Üê Home</button>
            <h2 class="text-3xl mb-2 font-bold text-fancy mt-4">Access Matrix</h2>
            <p class="text-white/60 text-sm mb-12">Verify identity to initialize sequence.</p>
            <div class="text-left space-y-6">
                <div class="input-group">
                    <input type="text" id="reg-name" class="fashion-input" placeholder=" ">
                    <label class="fashion-label">Agent Name</label>
                </div>
                <div class="input-group">
                    <input type="email" id="reg-email" class="fashion-input" placeholder=" ">
                    <label class="fashion-label">Gmail Account</label>
                </div>
            </div>
            <button onclick="goToIntro()" class="btn-fancy w-full py-5 rounded-xl mt-10 text-sm">Initialize</button>
        </main>

        <!-- 1. TRAITS -->
        <main id="quiz-view" class="hidden luxury-card p-8 md:p-12 fade-in mt-4">
            <button onclick="goHome()" class="absolute top-6 left-6 text-white/50 hover:text-white text-sm">‚úï</button>
            <div class="text-center mb-8">
                <h2 class="text-2xl md:text-3xl mb-2 font-bold text-fancy">Core Data</h2>
                <p class="text-white/60 text-xs tracking-[0.2em] uppercase">Select 3+ Traits</p>
            </div>
            <div id="trait-grid" class="grid grid-cols-2 gap-3 mb-8"></div>
            <div class="flex justify-between items-center border-t border-white/10 pt-6">
                <div class="text-left">
                    <span class="text-xs text-white/40 uppercase tracking-widest">Selected</span>
                    <span id="counter" class="block text-3xl font-bold text-fancy">0</span>
                </div>
                <button onclick="goToDateView()" class="btn-fancy px-8 py-3 rounded-xl text-sm">Proceed</button>
            </div>
        </main>

        <!-- 2. DATE -->
        <main id="date-view" class="hidden luxury-card p-10 fade-in mt-4 text-center">
             <button onclick="backToQuiz()" class="absolute top-6 left-6 text-white/50 hover:text-white text-sm">‚Üê Back</button>
            <h2 class="text-2xl mb-2 font-bold text-fancy mt-6">Temporal Lock</h2>
            <p class="text-white/60 text-xs mb-8 uppercase tracking-widest">Input Birth Coordinates</p>
            <div class="space-y-6 mb-8">
                <div class="text-left">
                    <span class="text-xs text-[#00f3ff] uppercase tracking-widest mb-2 block">Month</span>
                    <select id="birth-month" class="fashion-input bg-transparent">
                        <option value="1" class="text-black">January</option>
                        <option value="2" class="text-black">February</option>
                        <option value="3" class="text-black">March</option>
                        <option value="4" class="text-black">April</option>
                        <option value="5" class="text-black">May</option>
                        <option value="6" class="text-black">June</option>
                        <option value="7" class="text-black">July</option>
                        <option value="8" class="text-black">August</option>
                        <option value="9" class="text-black">September</option>
                        <option value="10" class="text-black">October</option>
                        <option value="11" class="text-black">November</option>
                        <option value="12" class="text-black">December</option>
                    </select>
                </div>
                <div class="text-left">
                    <div class="input-group mb-0">
                        <input type="number" id="birth-day" class="fashion-input" placeholder=" " min="1" max="31">
                        <label class="fashion-label">Day (01-31)</label>
                    </div>
                </div>
            </div>
            <button onclick="goToNameView()" class="btn-fancy px-12 py-4 rounded-xl w-full">Next Phase</button>
        </main>

        <!-- 3. URDU NAME -->
        <main id="name-view" class="hidden luxury-card p-10 fade-in mt-4 text-center">
            <button onclick="backToDate()" class="absolute top-6 left-6 text-white/50 hover:text-white text-sm">‚Üê Back</button>
            <h2 class="text-2xl mb-2 font-bold text-fancy mt-6">Spiritual Key</h2>
            <p class="text-white/60 text-xs mb-10 uppercase tracking-widest">Name in Urdu</p>
            <div class="mb-12 relative max-w-md mx-auto">
                <div class="input-group">
                    <input type="text" id="user-name-urdu" class="fashion-input text-center text-4xl urdu-input" placeholder=" " dir="rtl" oninput="updateLiveCalc(this.value)">
                    <label class="fashion-label text-center w-full" style="left:0">e.g. ŸÖÿ≤ŸÖŸÑ ŸÖÿ≠ŸÖŸàÿØ</label>
                </div>
                <p id="live-calc-preview" class="text-[#00f3ff] text-xs uppercase tracking-widest mt-2 opacity-0 transition-opacity">
                    Value: <span id="live-score">0</span>
                </p>
            </div>
            <button onclick="startProcessing()" class="btn-fancy px-12 py-4 rounded-xl w-full">Reveal Destiny</button>
        </main>

        <!-- 3.5 PROCESSING -->
        <main id="processing-view" class="hidden luxury-card p-16 mt-4 text-center fade-in">
            <div class="processing-orb"></div>
            <h2 id="process-text" class="text-2xl font-bold text-white mb-2 animate-pulse">Aligning Stars...</h2>
        </main>

        <!-- 4. RESULTS -->
        <main id="result-view" class="hidden space-y-8 pb-20 fade-in mt-4">
             <button onclick="goHome()" class="fixed top-24 right-6 z-50 bg-black/50 backdrop-blur px-4 py-2 rounded-full text-white/70 border border-white/10 hover:text-white text-xs uppercase tracking-widest">‚úï Close</button>

            <div class="text-center mb-6">
                <p class="text-[#00f3ff] text-[10px] font-bold uppercase tracking-[0.6em] mb-2">Analysis Complete For</p>
                <h2 id="final-user-name" class="text-3xl font-bold text-white tracking-tight"></h2>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                <!-- Main Element Card -->
                <div class="lg:col-span-8 luxury-card p-8 relative overflow-hidden">
                    <div id="element-glow" class="absolute -top-32 -right-32 w-96 h-96 bg-purple-600/30 blur-[120px] rounded-full pointer-events-none"></div>
                    <div class="relative z-10">
                        <div class="relative text-center mb-8 p-6 rounded-3xl border border-white/10 bg-white/5 backdrop-blur-md">
                            <span class="text-fancy text-[10px] font-bold uppercase tracking-[0.4em] block mb-2">My Holy Name</span>
                            <h1 id="display-name" class="text-5xl font-bold text-white urdu drop-shadow-2xl"></h1>
                        </div>
                        <div class="flex flex-col items-center justify-center mb-8 gap-4 text-center">
                            <div id="winner-icon" class="text-6xl animate-pulse"></div>
                            <div>
                                <h2 id="winner-name" class="text-4xl font-bold mb-1 text-fancy"></h2>
                                <p id="winner-urdu" class="urdu text-xl text-white/60"></p>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div class="p-4 border border-white/5 bg-white/[0.02] rounded-xl">
                                <h4 class="text-[#00f3ff] font-bold text-[10px] uppercase mb-2">Strengths</h4>
                                <p id="qualities-text" class="text-white/80 text-xs leading-relaxed"></p>
                            </div>
                            <div class="p-4 border border-white/5 bg-white/[0.02] rounded-xl">
                                <h4 class="text-[#ff0055] font-bold text-[10px] uppercase mb-2">Challenges</h4>
                                <p id="challenges-text" class="text-white/80 text-xs leading-relaxed"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Side Panel -->
                <div class="lg:col-span-4 space-y-6">
                    <div class="luxury-card p-6 border-t-4 border-t-[#00f3ff]">
                        <div class="flex items-center gap-4 mb-4">
                            <span id="zodiac-icon" class="text-4xl text-[#00f3ff]"></span>
                            <div>
                                <h3 id="zodiac-name" class="text-xl font-bold text-fancy"></h3>
                                <p id="zodiac-date" class="text-[10px] text-[#00f3ff] uppercase tracking-widest"></p>
                            </div>
                        </div>
                        <p id="zodiac-personality" class="text-xs text-white/90 leading-relaxed font-semibold mb-2"></p>
                        <p id="zodiac-singing" class="text-xs text-white/60 leading-relaxed italic"></p>
                    </div>
                    <div class="luxury-card p-6 flex flex-col items-center justify-center">
                        <h3 class="text-[10px] font-bold uppercase tracking-[0.3em] text-white/40 mb-4">Balance</h3>
                        <div class="w-full h-40 relative">
                            <canvas id="elementChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Abjad -->
            <div class="luxury-card p-8 border border-emerald-500/20 bg-emerald-900/5">
                 <div class="flex items-center justify-between mb-6">
                     <div>
                         <span class="text-emerald-400 text-[10px] font-bold uppercase tracking-widest block">Numerology</span>
                         <h3 class="text-2xl text-fancy font-bold">Geometry</h3>
                     </div>
                     <span class="block text-4xl text-emerald-400 font-bold" id="abjad-sum">0</span>
                 </div>
                 <div id="abjad-matches" class="space-y-3"></div>
            </div>

            <button onclick="goHome()" class="btn-fancy w-full py-4 rounded-xl text-sm">Return Home</button>
        </main>

    </div>

    <!-- PWA Logic -->
    <script type="module" src="js/app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js');
            });
        }
    </script>
</body>
</html>