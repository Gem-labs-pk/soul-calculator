<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soul Calculator | Sweet Edition</title>
    
    <!-- PWA Settings -->
    <meta name="theme-color" content="#0f0c29">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="./icon.svg">
    <link rel="apple-touch-icon" href="./icon.svg">

    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-6 overflow-x-hidden">

    <div class="cosmic-void"></div>
    <div class="nebula"></div>

    <!-- Menu Button -->
    <button onclick="toggleMenu()" class="fixed top-0 left-0 z-50 w-16 h-16 flex items-center justify-center border-r border-b border-white/10 bg-black/20 backdrop-blur-md transition-all duration-300 hover:bg-white/10 hover:border-[#00f3ff] group cursor-pointer shadow-2xl rounded-br-3xl">
        <div class="grid grid-cols-2 gap-1.5">
            <div class="w-1.5 h-1.5 bg-white/70 group-hover:bg-[#00f3ff] transition-colors shadow-[0_0_5px_rgba(255,255,255,0.5)]"></div>
            <div class="w-1.5 h-1.5 bg-white/70 group-hover:bg-[#00f3ff] transition-colors shadow-[0_0_5px_rgba(255,255,255,0.5)]"></div>
            <div class="w-1.5 h-1.5 bg-white/70 group-hover:bg-[#00f3ff] transition-colors shadow-[0_0_5px_rgba(255,255,255,0.5)]"></div>
            <div class="w-1.5 h-1.5 bg-white/70 group-hover:bg-[#00f3ff] transition-colors shadow-[0_0_5px_rgba(255,255,255,0.5)]"></div>
        </div>
    </button>

    <!-- Side Menu -->
    <div id="side-menu" class="fixed top-0 left-0 h-full w-80 bg-[#0f0c29]/95 backdrop-blur-xl border-r border-white/10 z-40 p-8 shadow-2xl overflow-y-auto">
        <div class="flex justify-between items-center mb-10 pt-10">
            <h2 class="text-xl font-bold text-fancy tracking-widest">INFO</h2>
            <button onclick="toggleMenu()" class="text-white/50 hover:text-white text-2xl">&times;</button>
        </div>
        <div class="space-y-2">
            <div>
                <div class="menu-header" onclick="toggleAccordion(this)">
                    <h3 class="text-[#00f3ff] text-xs font-bold uppercase tracking-[0.2em]">Details</h3>
                    <span class="text-white text-xl font-light">+</span>
                </div>
                <div class="menu-content">
                    <p class="text-sm text-white/70 leading-relaxed font-light">
                        “Soul Elements is a premium profiling ritual. It merges Elemental Traits, Zodiac Astrology, and Abjad Numerology into a high-graphic, 3D animated experience.”
                    </p>
                </div>
            </div>
            <div>
                <div class="menu-header" onclick="toggleAccordion(this)">
                    <h3 class="text-[#bd00ff] text-xs font-bold uppercase tracking-[0.2em]">Architecture</h3>
                    <span class="text-white text-xl font-light">+</span>
                </div>
                <div class="menu-content">
                    <div class="space-y-1">
                        <p class="text-white font-bold text-lg stylish-font text-gold-premium">Muzammil Mahmood</p>
                        <p class="text-sm text-white/60">Software Engineer</p>
                    </div>
                </div>
            </div>
            <div>
                <div class="menu-header" onclick="toggleAccordion(this)">
                    <h3 class="text-[#ff0055] text-xs font-bold uppercase tracking-[0.2em]">Contact</h3>
                    <span class="text-white text-xl font-light">+</span>
                </div>
                <div class="menu-content">
                    <a href="mailto:muzammilmahmood47@gmail.com" class="text-sm text-white/70 hover:text-[#00f3ff] transition-colors break-all block">
                        muzammilmahmood47@gmail.com
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="absolute top-8 text-center z-20 pointer-events-none">
        <p class="text-[10px] uppercase tracking-[0.5em] text-white/50 mb-2">System V.2.0</p>
        <h1 class="text-4xl md:text-6xl font-black tracking-tight text-fancy drop-shadow-2xl">SOUL CALCULATOR</h1>
    </header>

    <div class="max-w-5xl w-full relative z-10 mt-24">

        <!-- 0. REGISTRATION -->
        <main id="intro-view" class="luxury-card rounded-3xl p-10 md:p-16 max-w-xl mx-auto fade-in text-center">
            <h2 class="text-3xl mb-2 font-bold text-fancy">Access Matrix</h2>
            <p class="text-white/60 text-sm mb-12">Verify identity to initialize sequence.</p>
            <div class="text-left space-y-6">
                <div class="input-group">
                    <input type="text" id="reg-name" class="fashion-input" placeholder=" ">
                    <label class="fashion-label">Agent Name</label>
                </div>
                <div class="input-group">
                    <input type="email" id="reg-email" class="fashion-input" placeholder=" ">
                    <label class="fashion-label">Gmail Account</label>
                </div>
            </div>
            <button onclick="goToIntro()" class="btn-fancy w-full py-5 rounded-xl mt-10 text-sm">Initialize</button>
        </main>

        <!-- 1. TRAITS -->
        <main id="quiz-view" class="hidden luxury-card p-8 md:p-12 fade-in">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl mb-4 font-bold text-fancy">Select Core Data</h2>
                <p class="text-white/60 text-xs tracking-[0.2em] uppercase mt-4">Select 3+ Traits</p>
            </div>
            <div id="trait-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-12"></div>
            <div class="flex justify-between items-center border-t border-white/10 pt-8">
                <div class="text-left">
                    <span class="text-xs text-white/40 uppercase tracking-widest">Cached</span>
                    <span id="counter" class="block text-3xl font-bold text-fancy">0</span>
                </div>
                <button onclick="goToDateView()" class="btn-fancy px-12 py-4 rounded-xl">Proceed</button>
            </div>
        </main>

        <!-- 2. DATE -->
        <main id="date-view" class="hidden luxury-card p-10 md:p-16 max-w-2xl mx-auto text-center fade-in">
            <h2 class="text-3xl mb-2 font-bold text-fancy">Temporal Lock</h2>
            <p class="text-white/60 text-sm mb-12 uppercase tracking-widest">Input Birth Coordinates</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                <div class="text-left">
                    <span class="text-xs text-[#00f3ff] uppercase tracking-widest mb-2 block">Month</span>
                    <select id="birth-month" class="fashion-input bg-transparent">
                        <option value="1" class="text-black">January</option>
                        <option value="2" class="text-black">February</option>
                        <option value="3" class="text-black">March</option>
                        <option value="4" class="text-black">April</option>
                        <option value="5" class="text-black">May</option>
                        <option value="6" class="text-black">June</option>
                        <option value="7" class="text-black">July</option>
                        <option value="8" class="text-black">August</option>
                        <option value="9" class="text-black">September</option>
                        <option value="10" class="text-black">October</option>
                        <option value="11" class="text-black">November</option>
                        <option value="12" class="text-black">December</option>
                    </select>
                </div>
                <div class="text-left">
                    <div class="input-group mb-0">
                        <input type="number" id="birth-day" class="fashion-input" placeholder=" " min="1" max="31">
                        <label class="fashion-label">Day (01-31)</label>
                    </div>
                </div>
            </div>
            <div class="flex gap-4 justify-center">
                <button onclick="backToQuiz()" class="text-white/40 hover:text-white text-xs uppercase tracking-widest transition-colors px-6">Back</button>
                <button onclick="goToNameView()" class="btn-fancy px-12 py-4 rounded-xl">Next Phase</button>
            </div>
        </main>

        <!-- 3. URDU NAME -->
        <main id="name-view" class="hidden luxury-card p-10 md:p-16 max-w-2xl mx-auto text-center fade-in">
            <h2 class="text-3xl mb-2 font-bold text-fancy">Spiritual Key</h2>
            <p class="text-white/60 text-sm mb-12 uppercase tracking-widest">Type Name in Urdu for Abjad Analysis</p>
            <div class="mb-12 relative max-w-md mx-auto">
                <div class="input-group">
                    <input type="text" id="user-name-urdu" class="fashion-input text-center text-4xl urdu-input" placeholder=" " dir="rtl" oninput="updateLiveCalc(this.value)">
                    <label class="fashion-label text-center w-full" style="left:0">e.g. مزمل محمود</label>
                </div>
                <p id="live-calc-preview" class="text-[#00f3ff] text-xs uppercase tracking-widest mt-2 opacity-0 transition-opacity">
                    Value: <span id="live-score">0</span>
                </p>
            </div>
            <div class="flex gap-4 justify-center">
                <button onclick="backToDate()" class="text-white/40 hover:text-white text-xs uppercase tracking-widest transition-colors px-6">Back</button>
                <button onclick="startProcessing()" class="btn-fancy px-12 py-4 rounded-xl w-full md:w-auto">Reveal Destiny</button>
            </div>
        </main>

        <!-- 3.5 PROCESSING -->
        <main id="processing-view" class="hidden luxury-card p-16 max-w-xl mx-auto text-center fade-in">
            <div class="processing-orb"></div>
            <h2 id="process-text" class="text-2xl font-bold text-white mb-2 animate-pulse">Aligning Stars...</h2>
            <p class="text-white/40 text-xs uppercase tracking-[0.3em]">Please Wait</p>
        </main>

        <!-- 4. RESULTS -->
        <main id="result-view" class="hidden space-y-8 pb-20 fade-in">
            <div class="text-center mb-10">
                <p class="text-[#00f3ff] text-[10px] font-bold uppercase tracking-[0.6em] mb-2">Analysis Complete For</p>
                <h2 id="final-user-name" class="text-4xl font-bold text-white tracking-tight"></h2>
                <p id="final-user-email" class="text-white/30 text-sm mt-1 font-mono uppercase tracking-widest break-all"></p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                <!-- Main Element Card -->
                <div class="lg:col-span-8 luxury-card p-8 md:p-12 relative overflow-hidden">
                    <div id="element-glow" class="absolute -top-32 -right-32 w-96 h-96 bg-purple-600/30 blur-[120px] rounded-full pointer-events-none"></div>
                    <div class="relative z-10">
                        <!-- Holy Name Display -->
                        <div class="relative text-center mb-12 p-8 rounded-3xl border border-white/10 bg-white/5 backdrop-blur-md">
                            <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-[#302b63] px-6 py-1 rounded-full border border-white/20">
                                <span class="text-fancy text-[10px] font-bold uppercase tracking-[0.4em]">My Holy Name</span>
                            </div>
                            <h1 id="display-name" class="text-5xl md:text-7xl font-bold text-white urdu drop-shadow-2xl py-2"></h1>
                        </div>
                        <div class="flex flex-col md:flex-row items-center md:items-start justify-between mb-10 gap-6 text-center md:text-left">
                            <div>
                                <span class="text-xs font-bold uppercase tracking-[0.3em] text-[#00f3ff] mb-2 block">Dominant Element</span>
                                <h2 id="winner-name" class="text-5xl md:text-7xl font-bold mb-2 text-fancy"></h2>
                                <p id="winner-urdu" class="urdu text-2xl text-white/60"></p>
                            </div>
                            <div id="winner-icon" class="text-8xl animate-pulse filter drop-shadow-[0_0_15px_rgba(255,255,255,0.2)]"></div>
                        </div>
                        <div class="grid md:grid-cols-2 gap-6 mb-8">
                            <div class="p-6 border border-white/5 bg-white/[0.02] rounded-2xl">
                                <h4 class="text-[#00f3ff] font-bold text-xs uppercase mb-3 tracking-widest border-b border-white/10 pb-2">Strengths</h4>
                                <p id="qualities-text" class="text-white/80 text-sm leading-relaxed font-medium"></p>
                            </div>
                            <div class="p-6 border border-white/5 bg-white/[0.02] rounded-2xl">
                                <h4 class="text-[#ff0055] font-bold text-xs uppercase mb-3 tracking-widest border-b border-white/10 pb-2">Challenges</h4>
                                <p id="challenges-text" class="text-white/80 text-sm leading-relaxed font-medium"></p>
                            </div>
                        </div>
                        <div class="bg-gradient-to-r from-purple-900/20 to-transparent border-l-4 border-purple-500 p-6 rounded-r-xl">
                            <span class="text-purple-400 text-[10px] font-bold uppercase tracking-widest block mb-1">Soulmate Synergy</span>
                            <span id="best-match" class="text-2xl text-white font-bold"></span>
                        </div>
                    </div>
                </div>
                <!-- Side Panel -->
                <div class="lg:col-span-4 space-y-8">
                    <div class="luxury-card p-8 border-t-4 border-t-[#00f3ff]">
                        <span class="text-[10px] font-bold uppercase tracking-[0.3em] text-white/40 mb-6 block">Astral Signature</span>
                        <div class="flex items-center gap-4 mb-6">
                            <span id="zodiac-icon" class="text-5xl text-[#00f3ff]"></span>
                            <div>
                                <h3 id="zodiac-name" class="text-2xl font-bold text-fancy"></h3>
                                <p id="zodiac-date" class="text-[10px] text-[#00f3ff] uppercase tracking-widest"></p>
                            </div>
                        </div>
                        <div class="space-y-6">
                            <div>
                                <p class="text-[9px] uppercase text-white/40 tracking-widest mb-1">Archetype</p>
                                <p id="zodiac-personality" class="text-sm text-white/90 leading-tight font-semibold"></p>
                            </div>
                            <div>
                                <p class="text-[9px] uppercase text-white/40 tracking-widest mb-1">Vocal Resonance</p>
                                <p id="zodiac-singing" class="text-sm text-white/90 leading-tight italic"></p>
                            </div>
                        </div>
                    </div>
                    <div class="luxury-card p-6 flex flex-col items-center justify-center">
                        <h3 class="text-[10px] font-bold uppercase tracking-[0.3em] text-white/40 mb-4">Elemental Balance</h3>
                        <div class="w-full h-48 relative">
                            <canvas id="elementChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Abjad -->
            <div class="luxury-card p-10 border border-emerald-500/20 bg-emerald-900/5 relative overflow-hidden">
                 <div class="relative z-10 flex flex-col md:flex-row items-center justify-between gap-8">
                     <div class="text-center md:text-left">
                         <span class="text-emerald-400 text-[10px] font-bold uppercase tracking-[0.3em] block mb-2">Ilm-ul-Ramal / Numerology</span>
                         <h3 class="text-3xl text-fancy mb-1 font-bold">Spiritual Geometry</h3>
                         <p class="text-white/40 text-xs uppercase tracking-widest">Calculation Source: <span id="abjad-input-name" class="text-white urdu px-2"></span></p>
                     </div>
                     <div class="text-center">
                        <span class="block text-6xl text-emerald-400 font-bold drop-shadow-lg" id="abjad-sum">0</span>
                        <span class="text-[9px] uppercase text-white/40 tracking-widest">Total Value</span>
                    </div>
                 </div>
                 <div class="mt-10 pt-10 border-t border-white/5">
                     <h4 class="text-center text-[10px] font-bold uppercase text-emerald-500 mb-6 tracking-[0.4em]">Divine Resonance Found</h4>
                     <div id="abjad-matches" class="text-center space-y-4"></div>
                 </div>
            </div>

            <!-- Footer -->
            <footer class="text-center py-24 opacity-70 hover:opacity-100 transition-opacity">
                <div class="group cursor-default">
                    <h1 class="text-xl md:text-3xl stylish-font text-gold-premium tracking-widest mb-2">Muzammil Mahmood</h1>
                    <p class="text-sm md:text-base font-sans text-white/60 tracking-wider font-light">Islamia University of Bahawalpur</p>
                    <div class="h-[1px] w-12 bg-gradient-to-r from-transparent via-[#00f3ff] to-transparent mx-auto mt-6 transition-all group-hover:w-48"></div>
                    <p class="text-white/30 text-[9px] font-bold uppercase tracking-[0.6em] mt-4">Architects of Reality</p>
                </div>
                <button onclick="resetApp()" class="mt-12 text-[10px] text-[#00f3ff] border border-[#00f3ff]/30 px-8 py-3 uppercase tracking-[0.2em] hover:bg-[#00f3ff] hover:text-black transition-all rounded">Restart Ritual</button>
            </footer>
        </main>
    </div>

    <!-- PWA Registration -->
    <script type="module" src="js/app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(reg => console.log('SW registered:', reg))
                    .catch(err => console.log('SW error:', err));
            });
        }
    </script>
</body>
</html>