<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soul Calculator | Sweet Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Added Cinzel for the stylish names */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Outfit:wght@300;400;600;800&family=Noto+Nastaliq+Urdu:wght@400;700&display=swap');
        
        :root {
            /* Sweet Color Palette */
            --bg-dark: #0f0c29;
            --bg-mid: #302b63;
            --bg-light: #24243e;
            --glass-surface: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            
            /* Gradient Colors for Text */
            --neon-cyan: #00f3ff;
            --neon-purple: #bd00ff;
            --neon-pink: #ff0055;
            --neon-yellow: #ffe600;
            --gold-border: #D4AF37;
            --premium-gold: #FFD700;
        }

        body { 
            font-family: 'Outfit', sans-serif;
            background: var(--bg-dark); 
            color: #e5e5e5; 
            overflow-x: hidden;
            perspective: 1000px;
        }

        .stylish-font { font-family: 'Cinzel Decorative', serif; }

        .urdu { 
            font-family: 'Noto Nastaliq Urdu', serif; 
            line-height: 2.2; 
            padding-bottom: 5px;
        }
        .urdu-input {
            font-family: 'Noto Nastaliq Urdu', serif;
            line-height: 2.5;
            padding-top: 15px;
            padding-bottom: 10px;
            height: 80px;
        }

        /* --- Sweet Background --- */
        .cosmic-void {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: linear-gradient(to bottom right, #0f0c29, #302b63, #24243e);
        }
        
        .nebula {
            position: absolute; width: 100vw; height: 100vh;
            background: 
                radial-gradient(circle at 20% 30%, rgba(189, 0, 255, 0.2), transparent 40%), 
                radial-gradient(circle at 80% 70%, rgba(0, 243, 255, 0.2), transparent 40%);
            filter: blur(60px);
            animation: colorShift 8s infinite alternate;
        }

        @keyframes colorShift {
            0% { opacity: 0.6; }
            100% { opacity: 0.9; }
        }

        /* --- Animated Colored Headings --- */
        .text-fancy {
            background: linear-gradient(270deg, var(--neon-cyan), var(--neon-purple), var(--neon-pink), var(--neon-yellow));
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientFlow 4s ease infinite;
        }
        
        /* Premium Gold Gradient Text */
        .text-gold-premium {
            background: linear-gradient(to bottom, #FFD700, #FDB931, #9E7D28, #FDB931, #FFD700);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0px 2px 4px rgba(0,0,0,0.3);
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- Modern Glass Cards --- */
        .luxury-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            border-radius: 24px;
            position: relative;
            overflow: hidden;
            transition: transform 0.4s ease;
        }

        /* --- Inputs --- */
        .input-group { position: relative; margin-bottom: 2rem; }
        .fashion-input {
            width: 100%; background: transparent; border: none;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            padding: 1rem 0; color: white; font-size: 1.2rem;
            font-family: 'Outfit', sans-serif; outline: none;
            transition: all 0.3s;
        }
        .fashion-input:focus { 
            border-image: linear-gradient(to right, var(--neon-cyan), var(--neon-purple)); 
            border-image-slice: 1;
        }
        .fashion-label {
            position: absolute; top: 1rem; left: 0; width: 100%;
            color: rgba(255,255,255,0.5); text-transform: uppercase;
            font-size: 0.8rem; letter-spacing: 0.1em; pointer-events: none;
            transition: all 0.3s; font-weight: 600;
        }
        .fashion-input:focus ~ .fashion-label,
        .fashion-input:not(:placeholder-shown) ~ .fashion-label {
            top: -1.2rem; color: var(--neon-cyan); font-size: 0.7rem; letter-spacing: 0.2em;
        }

        /* --- HIGHLY ANIMATED BUTTONS --- */
        .btn-fancy {
            position: relative;
            background: rgba(0,0,0,0.3);
            color: white;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-family: 'Outfit', sans-serif;
            font-weight: 800;
            border: none;
            z-index: 1;
            overflow: hidden;
            transition: all 0.1s ease; /* Faster transition for touch response */
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.1);
        }

        /* Animated Border Gradient */
        .btn-fancy::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 0.75rem; 
            padding: 2px; 
            background: linear-gradient(45deg, var(--neon-cyan), var(--neon-purple), var(--neon-pink), var(--neon-yellow));
            background-size: 400% 400%;
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: borderRun 3s linear infinite;
            z-index: -1;
        }

        /* Hover Shine Effect */
        .btn-fancy::after {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
            z-index: -1;
        }

        .btn-fancy:hover {
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.4);
            background: rgba(0, 243, 255, 0.1);
        }
        
        /* Active / Touch Animation */
        .btn-fancy:active {
            transform: scale(0.95); /* Shrink on click/touch */
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.6);
        }
        
        .btn-fancy:hover::after {
            left: 100%;
        }

        @keyframes borderRun {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- Trait Cards --- */
        .trait-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s;
        }
        .trait-card:hover {
            border-color: var(--neon-purple);
            background: rgba(189, 0, 255, 0.1);
            transform: translateY(-5px);
        }
        .trait-selected {
            background: linear-gradient(135deg, rgba(189, 0, 255, 0.3), rgba(0, 243, 255, 0.1)) !important;
            border-color: var(--neon-cyan) !important;
            box-shadow: 0 0 25px rgba(0, 243, 255, 0.2) !important;
        }

        /* --- Animations --- */
        .fade-in { animation: fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(30px); }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        
        /* Processing Orb */
        .processing-orb {
            width: 80px; height: 80px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, var(--neon-cyan), transparent);
            filter: blur(10px);
            animation: orbSpin 1.5s linear infinite;
            margin: 0 auto 2rem;
            position: relative;
        }
        .processing-orb::after {
            content: ''; position: absolute; inset: 0;
            border-radius: 50%;
            border: 2px solid var(--neon-purple);
            border-top-color: transparent;
            animation: spinReverse 1s linear infinite;
        }
        @keyframes orbSpin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes spinReverse { 0% { transform: rotate(360deg); } 100% { transform: rotate(0deg); } }

        /* --- Side Menu Styles --- */
        #side-menu {
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            transform: translateX(-100%);
        }
        #side-menu.open {
            transform: translateX(0);
        }
        
        /* Accordion Styles */
        .menu-header {
            cursor: pointer;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: color 0.3s;
        }
        .menu-header:hover {
            color: var(--neon-cyan);
        }
        .menu-header span {
            transition: transform 0.3s;
        }
        .menu-header.active span {
            transform: rotate(45deg);
            color: var(--neon-cyan);
        }
        .menu-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, opacity 0.3s;
            opacity: 0;
        }
        .menu-content.open {
            max-height: 300px; /* Arbitrary large height */
            opacity: 1;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }

        .hidden { display: none; }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-6 overflow-x-hidden">

    <div class="cosmic-void"></div>
    <div class="nebula"></div>

    <!-- Menu Button (Corner Docked) -->
    <button onclick="toggleMenu()" class="fixed top-0 left-0 z-50 w-16 h-16 flex items-center justify-center border-r border-b border-white/10 bg-black/20 backdrop-blur-md transition-all duration-300 hover:bg-white/10 hover:border-[#00f3ff] group cursor-pointer shadow-2xl rounded-br-3xl">
        <div class="grid grid-cols-2 gap-1.5">
            <div class="w-1.5 h-1.5 bg-white/70 group-hover:bg-[#00f3ff] transition-colors shadow-[0_0_5px_rgba(255,255,255,0.5)]"></div>
            <div class="w-1.5 h-1.5 bg-white/70 group-hover:bg-[#00f3ff] transition-colors shadow-[0_0_5px_rgba(255,255,255,0.5)]"></div>
            <div class="w-1.5 h-1.5 bg-white/70 group-hover:bg-[#00f3ff] transition-colors shadow-[0_0_5px_rgba(255,255,255,0.5)]"></div>
            <div class="w-1.5 h-1.5 bg-white/70 group-hover:bg-[#00f3ff] transition-colors shadow-[0_0_5px_rgba(255,255,255,0.5)]"></div>
        </div>
    </button>

    <!-- Side Menu with Accordion -->
    <div id="side-menu" class="fixed top-0 left-0 h-full w-80 bg-[#0f0c29]/95 backdrop-blur-xl border-r border-white/10 z-40 p-8 shadow-2xl overflow-y-auto">
        <div class="flex justify-between items-center mb-10 pt-10">
            <h2 class="text-xl font-bold text-fancy tracking-widest">INFO</h2>
            <button onclick="toggleMenu()" class="text-white/50 hover:text-white text-2xl">&times;</button>
        </div>

        <div class="space-y-2">
            <!-- Section 1 -->
            <div>
                <div class="menu-header" onclick="toggleAccordion(this)">
                    <h3 class="text-[#00f3ff] text-xs font-bold uppercase tracking-[0.2em]">Details</h3>
                    <span class="text-white text-xl font-light">+</span>
                </div>
                <div class="menu-content">
                    <p class="text-sm text-white/70 leading-relaxed font-light">
                        ‚ÄúSoul Elements is a premium profiling ritual. It merges Elemental Traits, Zodiac Astrology, and Abjad Numerology into a high-graphic, 3D animated experience to reveal your complete spiritual and personality matrix.‚Äù
                    </p>
                </div>
            </div>

            <!-- Section 2 -->
            <div>
                <div class="menu-header" onclick="toggleAccordion(this)">
                    <h3 class="text-[#bd00ff] text-xs font-bold uppercase tracking-[0.2em]">Architecture Details</h3>
                    <span class="text-white text-xl font-light">+</span>
                </div>
                <div class="menu-content">
                    <div class="space-y-1">
                        <p class="text-white font-bold text-lg stylish-font text-gold-premium">Muzammil Mahmood</p>
                        <p class="text-sm text-white/60">Software Engineer</p>
                        <p class="text-xs text-white/40 uppercase tracking-wider mt-2">Islamia University of Bahawalpur</p>
                    </div>
                </div>
            </div>

            <!-- Section 3 -->
            <div>
                <div class="menu-header" onclick="toggleAccordion(this)">
                    <h3 class="text-[#ff0055] text-xs font-bold uppercase tracking-[0.2em]">Contact</h3>
                    <span class="text-white text-xl font-light">+</span>
                </div>
                <div class="menu-content">
                    <!-- Added break-all to ensure email wraps properly -->
                    <a href="mailto:muzammilmahmood47@gmail.com" class="text-sm text-white/70 hover:text-[#00f3ff] transition-colors break-all block">
                        muzammilmahmood47@gmail.com
                    </a>
                </div>
            </div>
        </div>
        
        <div class="absolute bottom-8 left-8 text-white/20 text-[10px] uppercase tracking-widest">
            System V.2.0
        </div>
    </div>

    <!-- Header -->
    <header class="absolute top-8 text-center z-20 pointer-events-none">
        <p class="text-[10px] uppercase tracking-[0.5em] text-white/50 mb-2">System V.2.0</p>
        <h1 class="text-4xl md:text-6xl font-black tracking-tight text-fancy drop-shadow-2xl">SOUL CALCULATOR</h1>
    </header>

    <div class="max-w-5xl w-full relative z-10 mt-24">

        <!-- 0. REGISTRATION -->
        <main id="intro-view" class="luxury-card rounded-3xl p-10 md:p-16 max-w-xl mx-auto fade-in text-center">
            <h2 class="text-3xl mb-2 font-bold text-fancy">Access Matrix</h2>
            <p class="text-white/60 text-sm mb-12">Verify identity to initialize sequence.</p>

            <div class="text-left space-y-6">
                <div class="input-group">
                    <input type="text" id="reg-name" class="fashion-input" placeholder=" ">
                    <label class="fashion-label">Agent Name</label>
                </div>
                <div class="input-group">
                    <input type="email" id="reg-email" class="fashion-input" placeholder=" ">
                    <label class="fashion-label">Gmail Account</label>
                </div>
            </div>

            <button onclick="goToIntro()" class="btn-fancy w-full py-5 rounded-xl mt-10 text-sm">Initialize</button>
        </main>

        <!-- 1. TRAITS -->
        <main id="quiz-view" class="hidden luxury-card p-8 md:p-12 fade-in">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl mb-4 font-bold text-fancy">Select Core Data</h2>
                <p class="text-white/60 text-xs tracking-[0.2em] uppercase mt-4">Select 3+ Traits</p>
            </div>

            <div id="trait-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-12"></div>

            <div class="flex justify-between items-center border-t border-white/10 pt-8">
                <div class="text-left">
                    <span class="text-xs text-white/40 uppercase tracking-widest">Cached</span>
                    <span id="counter" class="block text-3xl font-bold text-fancy">0</span>
                </div>
                <button onclick="goToDateView()" class="btn-fancy px-12 py-4 rounded-xl">Proceed</button>
            </div>
        </main>

        <!-- 2. DATE -->
        <main id="date-view" class="hidden luxury-card p-10 md:p-16 max-w-2xl mx-auto text-center fade-in">
            <h2 class="text-3xl mb-2 font-bold text-fancy">Temporal Lock</h2>
            <p class="text-white/60 text-sm mb-12 uppercase tracking-widest">Input Birth Coordinates</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                <div class="text-left">
                    <span class="text-xs text-[#00f3ff] uppercase tracking-widest mb-2 block">Month</span>
                    <select id="birth-month" class="fashion-input bg-transparent">
                        <option value="1" class="text-black">January</option>
                        <option value="2" class="text-black">February</option>
                        <option value="3" class="text-black">March</option>
                        <option value="4" class="text-black">April</option>
                        <option value="5" class="text-black">May</option>
                        <option value="6" class="text-black">June</option>
                        <option value="7" class="text-black">July</option>
                        <option value="8" class="text-black">August</option>
                        <option value="9" class="text-black">September</option>
                        <option value="10" class="text-black">October</option>
                        <option value="11" class="text-black">November</option>
                        <option value="12" class="text-black">December</option>
                    </select>
                </div>
                <div class="text-left">
                    <div class="input-group mb-0">
                        <input type="number" id="birth-day" class="fashion-input" placeholder=" " min="1" max="31">
                        <label class="fashion-label">Day (01-31)</label>
                    </div>
                </div>
            </div>

            <div class="flex gap-4 justify-center">
                <button onclick="backToQuiz()" class="text-white/40 hover:text-white text-xs uppercase tracking-widest transition-colors px-6">Back</button>
                <button onclick="goToNameView()" class="btn-fancy px-12 py-4 rounded-xl">Next Phase</button>
            </div>
        </main>

        <!-- 3. URDU NAME -->
        <main id="name-view" class="hidden luxury-card p-10 md:p-16 max-w-2xl mx-auto text-center fade-in">
            <h2 class="text-3xl mb-2 font-bold text-fancy">Spiritual Key</h2>
            <p class="text-white/60 text-sm mb-12 uppercase tracking-widest">Type Name in Urdu for Abjad Analysis</p>
            
            <div class="mb-12 relative max-w-md mx-auto">
                <div class="input-group">
                    <input type="text" id="user-name-urdu" class="fashion-input text-center text-4xl urdu-input" placeholder=" " dir="rtl" oninput="updateLiveCalc(this.value)">
                    <label class="fashion-label text-center w-full" style="left:0">e.g. ŸÖÿ≤ŸÖŸÑ ŸÖÿ≠ŸÖŸàÿØ</label>
                </div>
                <p id="live-calc-preview" class="text-[#00f3ff] text-xs uppercase tracking-widest mt-2 opacity-0 transition-opacity">
                    Value: <span id="live-score">0</span>
                </p>
            </div>

            <div class="flex gap-4 justify-center">
                <button onclick="backToDate()" class="text-white/40 hover:text-white text-xs uppercase tracking-widest transition-colors px-6">Back</button>
                <button onclick="startProcessing()" class="btn-fancy px-12 py-4 rounded-xl w-full md:w-auto">Reveal Destiny</button>
            </div>
        </main>

        <!-- 3.5 PROCESSING -->
        <main id="processing-view" class="hidden luxury-card p-16 max-w-xl mx-auto text-center fade-in">
            <div class="processing-orb"></div>
            <h2 id="process-text" class="text-2xl font-bold text-white mb-2 animate-pulse">Aligning Stars...</h2>
            <p class="text-white/40 text-xs uppercase tracking-[0.3em]">Please Wait</p>
        </main>

        <!-- 4. RESULTS -->
        <main id="result-view" class="hidden space-y-8 pb-20 fade-in">
            
            <!-- User Header -->
            <div class="text-center mb-10">
                <p class="text-[#00f3ff] text-[10px] font-bold uppercase tracking-[0.6em] mb-2">Analysis Complete For</p>
                <h2 id="final-user-name" class="text-4xl font-bold text-white tracking-tight"></h2>
                <!-- Added break-all to result view email as well -->
                <p id="final-user-email" class="text-white/30 text-sm mt-1 font-mono uppercase tracking-widest break-all"></p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                
                <!-- Main Element Card -->
                <div class="lg:col-span-8 luxury-card p-8 md:p-12 relative overflow-hidden">
                    <div id="element-glow" class="absolute -top-32 -right-32 w-96 h-96 bg-purple-600/30 blur-[120px] rounded-full pointer-events-none"></div>

                    <div class="relative z-10">
                        <!-- Holy Name Display -->
                        <div class="relative text-center mb-12 p-8 rounded-3xl border border-white/10 bg-white/5 backdrop-blur-md">
                            <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-[#302b63] px-6 py-1 rounded-full border border-white/20">
                                <span class="text-fancy text-[10px] font-bold uppercase tracking-[0.4em]">My Holy Name</span>
                            </div>
                            <h1 id="display-name" class="text-5xl md:text-7xl font-bold text-white urdu drop-shadow-2xl py-2"></h1>
                        </div>

                        <div class="flex flex-col md:flex-row items-center md:items-start justify-between mb-10 gap-6 text-center md:text-left">
                            <div>
                                <span class="text-xs font-bold uppercase tracking-[0.3em] text-[#00f3ff] mb-2 block">Dominant Element</span>
                                <h2 id="winner-name" class="text-5xl md:text-7xl font-bold mb-2 text-fancy"></h2>
                                <p id="winner-urdu" class="urdu text-2xl text-white/60"></p>
                            </div>
                            <div id="winner-icon" class="text-8xl animate-pulse filter drop-shadow-[0_0_15px_rgba(255,255,255,0.2)]"></div>
                        </div>

                        <!-- Qualities -->
                        <div class="grid md:grid-cols-2 gap-6 mb-8">
                            <div class="p-6 border border-white/5 bg-white/[0.02] rounded-2xl">
                                <h4 class="text-[#00f3ff] font-bold text-xs uppercase mb-3 tracking-widest border-b border-white/10 pb-2">Strengths</h4>
                                <p id="qualities-text" class="text-white/80 text-sm leading-relaxed font-medium"></p>
                            </div>
                            <div class="p-6 border border-white/5 bg-white/[0.02] rounded-2xl">
                                <h4 class="text-[#ff0055] font-bold text-xs uppercase mb-3 tracking-widest border-b border-white/10 pb-2">Challenges</h4>
                                <p id="challenges-text" class="text-white/80 text-sm leading-relaxed font-medium"></p>
                            </div>
                        </div>

                        <!-- Match -->
                        <div class="bg-gradient-to-r from-purple-900/20 to-transparent border-l-4 border-purple-500 p-6 rounded-r-xl">
                            <span class="text-purple-400 text-[10px] font-bold uppercase tracking-widest block mb-1">Soulmate Synergy</span>
                            <span id="best-match" class="text-2xl text-white font-bold"></span>
                        </div>
                    </div>
                </div>

                <!-- Side Panel: Zodiac & Chart -->
                <div class="lg:col-span-4 space-y-8">
                    <div class="luxury-card p-8 border-t-4 border-t-[#00f3ff]">
                        <span class="text-[10px] font-bold uppercase tracking-[0.3em] text-white/40 mb-6 block">Astral Signature</span>
                        <div class="flex items-center gap-4 mb-6">
                            <span id="zodiac-icon" class="text-5xl text-[#00f3ff]"></span>
                            <div>
                                <h3 id="zodiac-name" class="text-2xl font-bold text-fancy"></h3>
                                <p id="zodiac-date" class="text-[10px] text-[#00f3ff] uppercase tracking-widest"></p>
                            </div>
                        </div>
                        <div class="space-y-6">
                            <div>
                                <p class="text-[9px] uppercase text-white/40 tracking-widest mb-1">Archetype</p>
                                <p id="zodiac-personality" class="text-sm text-white/90 leading-tight font-semibold"></p>
                            </div>
                            <div>
                                <p class="text-[9px] uppercase text-white/40 tracking-widest mb-1">Vocal Resonance</p>
                                <p id="zodiac-singing" class="text-sm text-white/90 leading-tight italic"></p>
                            </div>
                        </div>
                    </div>

                    <div class="luxury-card p-6 flex flex-col items-center justify-center">
                        <h3 class="text-[10px] font-bold uppercase tracking-[0.3em] text-white/40 mb-4">Elemental Balance</h3>
                        <div class="w-full h-48 relative">
                            <canvas id="elementChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Abjad -->
            <div class="luxury-card p-10 border border-emerald-500/20 bg-emerald-900/5 relative overflow-hidden">
                 <div class="relative z-10 flex flex-col md:flex-row items-center justify-between gap-8">
                     <div class="text-center md:text-left">
                         <span class="text-emerald-400 text-[10px] font-bold uppercase tracking-[0.3em] block mb-2">Ilm-ul-Ramal / Numerology</span>
                         <h3 class="text-3xl text-fancy mb-1 font-bold">Spiritual Geometry</h3>
                         <p class="text-white/40 text-xs uppercase tracking-widest">Calculation Source: <span id="abjad-input-name" class="text-white urdu px-2"></span></p>
                     </div>
                     <div class="text-center">
                        <span class="block text-6xl text-emerald-400 font-bold drop-shadow-lg" id="abjad-sum">0</span>
                        <span class="text-[9px] uppercase text-white/40 tracking-widest">Total Value</span>
                    </div>
                 </div>

                 <div class="mt-10 pt-10 border-t border-white/5">
                     <h4 class="text-center text-[10px] font-bold uppercase text-emerald-500 mb-6 tracking-[0.4em]">Divine Resonance Found</h4>
                     <div id="abjad-matches" class="text-center space-y-4"></div>
                 </div>
            </div>

            <!-- Footer -->
            <footer class="text-center py-24 opacity-70 hover:opacity-100 transition-opacity">
                <div class="group cursor-default">
                    <h1 class="text-xl md:text-3xl stylish-font text-gold-premium tracking-widest mb-2">
                        Muzammil Mahmood
                    </h1>
                    <p class="text-sm md:text-base font-sans text-white/60 tracking-wider font-light">
                        Islamia University of Bahawalpur
                    </p>
                    
                    <div class="h-[1px] w-12 bg-gradient-to-r from-transparent via-[#00f3ff] to-transparent mx-auto mt-6 transition-all group-hover:w-48"></div>
                    <p class="text-white/30 text-[9px] font-bold uppercase tracking-[0.6em] mt-4">Architects of Reality</p>
                </div>
                <button onclick="resetApp()" class="mt-12 text-[10px] text-[#00f3ff] border border-[#00f3ff]/30 px-8 py-3 uppercase tracking-[0.2em] hover:bg-[#00f3ff] hover:text-black transition-all rounded">Restart Ritual</button>
            </footer>
        </main>
    </div>

    <script>
        // --- DATA ---
        
        const elements = {
            Fire: { 
                urdu: "ÿ¢ÿ™ÿ¥€å (Agni)", color: '#ef4444', icon: 'üî•', 
                qualities: "Leadership, Intense energy, Visionary, Brave, Competitive",
                challenges: "Impulsiveness, stubbornness, burnout risk, short temper",
                match: "Air" 
            },
            Air: { 
                urdu: "€ÅŸàÿßÿ¶€å (Hawa)", color: '#f59e0b', icon: 'üå™Ô∏è', 
                qualities: "Witty, Charming, Intellectual, Adaptable, Curious",
                challenges: "Inconsistency, lack of focus, easily bored, detached",
                match: "Fire" 
            },
            Water: { 
                urdu: "ÿ¢ÿ®€å (Pani)", color: '#3b82f6', icon: 'üíß', 
                qualities: "Intuitive, Romantic, Dreamer, Protective, Empathetic",
                challenges: "Over-sensitive, avoids conflict, mood swings, self-sacrifice",
                match: "Earth" 
            },
            Earth: { 
                urdu: "ÿÆÿß⁄©€å (Mitti)", color: '#10b981', icon: 'üåø', 
                qualities: "Hardworking, Patient, Reliable, Practical, Grounded",
                challenges: "Rigid, overthinking, slow to change, stubborn",
                match: "Water" 
            }
        };

        const zodiacData = [
            { name: "Aquarius", icon: "‚ôí", start: {m:1, d:20}, end: {m:2, d:18}, p: "Creative, unique, independent", s: "Experimental, indie, futuristic sound üéß" },
            { name: "Pisces", icon: "‚ôì", start: {m:2, d:19}, end: {m:3, d:20}, p: "Dreamy, emotional, artistic", s: "Magical, emotional, soulful music üåä" },
            { name: "Aries", icon: "‚ôà", start: {m:3, d:21}, end: {m:4, d:19}, p: "Bold, energetic, confident, leader", s: "Powerful, loud, high-energy (rock / rap vibes)" },
            { name: "Taurus", icon: "‚ôâ", start: {m:4, d:20}, end: {m:5, d:20}, p: "Calm, loyal, patient, loves comfort", s: "Deep, smooth, romantic voice" },
            { name: "Gemini", icon: "‚ôä", start: {m:5, d:21}, end: {m:6, d:20}, p: "Talkative, intelligent, adaptable", s: "Fun, fast, pop or playful vocals" },
            { name: "Cancer", icon: "‚ôã", start: {m:6, d:21}, end: {m:7, d:22}, p: "Emotional, caring, sensitive", s: "Soft, soulful, emotional songs" },
            { name: "Leo", icon: "‚ôå", start: {m:7, d:23}, end: {m:8, d:22}, p: "Confident, dramatic, loves attention", s: "Powerful stage presence, star-like vocals üåü" },
            { name: "Virgo", icon: "‚ôç", start: {m:8, d:23}, end: {m:9, d:22}, p: "Perfectionist, practical, calm", s: "Clean, soft, meaningful lyrics" },
            { name: "Libra", icon: "‚ôé", start: {m:9, d:23}, end: {m:10, d:22}, p: "Charming, romantic, balanced", s: "Love songs, harmony, duet-style singing üíû" },
            { name: "Scorpio", icon: "‚ôè", start: {m:10, d:23}, end: {m:11, d:21}, p: "Intense, mysterious, passionate", s: "Deep, emotional, dark-tone songs" },
            { name: "Sagittarius", icon: "‚ôê", start: {m:11, d:22}, end: {m:12, d:21}, p: "Adventurous, optimistic, free-spirited", s: "Upbeat, party, travel-vibe songs üéâ" },
            { name: "Capricorn", icon: "‚ôë", start: {m:12, d:22}, end: {m:1, d:19}, p: "Disciplined, serious, ambitious", s: "Classic, strong message, meaningful music" }
        ];

        const ABJAD_MAP = {'ÿß': 1, 'ÿ¢': 1, 'ÿ£': 1, 'ÿ•': 1, 'ÿ°': 1, 'ÿ®': 2, 'Ÿæ': 2, 'ÿ¨': 3, '⁄Ü': 3, 'ÿØ': 4, '⁄à': 4, 'Ÿá': 5, '€Å': 5, 'ÿ©': 5, '⁄æ': 5, 'Ÿà': 6, 'ÿ§': 6, 'ÿ≤': 7, '⁄ò': 7, 'ÿ≠': 8, 'ÿ∑': 9, '€å': 10, 'Ÿä': 10, 'Ÿâ': 10, 'ÿ¶': 10, '€í': 10, '⁄©': 20, 'ŸÉ': 20, '⁄Ø': 20, 'ŸÑ': 30, 'ŸÖ': 40, 'ŸÜ': 50, '⁄∫': 50, 'ÿ≥': 60, 'ÿπ': 70, 'ŸÅ': 80, 'ÿµ': 90, 'ŸÇ': 100, 'ÿ±': 200, '⁄ë': 200, 'ÿ¥': 300, 'ÿ™': 400, 'Ÿπ': 400, 'ÿ´': 500, 'ÿÆ': 600, 'ÿ∞': 700, 'ÿ∂': 800, 'ÿ∏': 900, 'ÿ∫': 1000};

        const NAMES_OF_ALLAH = [
            { arabic: "ÿßŸÑŸÑŸá", transliteration: "Allah", sum: 66, meaningUrdu: "ÿÆÿØÿß" },
            { arabic: "ÿßŸÑÿ±ÿ≠ŸÖŸÜ", transliteration: "Ar-Rahman", sum: 298, meaningUrdu: "ÿ®€Åÿ™ ŸÖ€Åÿ±ÿ®ÿßŸÜ" },
            { arabic: "ÿßŸÑÿ±ÿ≠ŸäŸÖ", transliteration: "Ar-Rahim", sum: 258, meaningUrdu: "ŸÜ€Åÿß€åÿ™ ÿ±ÿ≠ŸÖ ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑŸÖŸÑŸÉ", transliteration: "Al-Malik", sum: 90, meaningUrdu: "ÿ®ÿßÿØÿ¥ÿß€Å" },
            { arabic: "ÿßŸÑŸÇÿØŸàÿ≥", transliteration: "Al-Quddus", sum: 170, meaningUrdu: "Ÿæÿß⁄© ÿ∞ÿßÿ™" },
            { arabic: "ÿßŸÑÿ≥ŸÑÿßŸÖ", transliteration: "As-Salam", sum: 131, meaningUrdu: "ÿ≥ŸÑÿßŸÖÿ™€å ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑŸÖÿ§ŸÖŸÜ", transliteration: "Al-Mu'min", sum: 136, meaningUrdu: "ÿßŸÖŸÜ ÿØ€åŸÜ€í ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑŸÖŸáŸäŸÖŸÜ", transliteration: "Al-Muhaymin", sum: 145, meaningUrdu: "ŸÜ⁄Ø€Åÿ®ÿßŸÜ" },
            { arabic: "ÿßŸÑÿπÿ≤Ÿäÿ≤", transliteration: "Al-Aziz", sum: 94, meaningUrdu: "ÿ∫ÿßŸÑÿ®" },
            { arabic: "ÿßŸÑÿ¨ÿ®ÿßÿ±", transliteration: "Al-Jabbar", sum: 206, meaningUrdu: "ÿ≤ÿ®ÿ±ÿØÿ≥ÿ™" },
            { arabic: "ÿßŸÑŸÖÿ™ŸÉŸÑŸÖ", transliteration: "Al-Mutakabbir", sum: 662, meaningUrdu: "ÿ®⁄ëÿßÿ¶€å ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑÿÆÿßŸÑŸÇ", transliteration: "Al-Khaliq", sum: 731, meaningUrdu: "Ÿæ€åÿØÿß ⁄©ÿ±ŸÜ€í ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑÿ®ÿßÿ±ÿ¶", transliteration: "Al-Bari", sum: 213, meaningUrdu: "ÿ¨ÿßŸÜ ⁄àÿßŸÑŸÜ€í ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑŸÖÿµŸàÿ±", transliteration: "Al-Musawwir", sum: 336, meaningUrdu: "ÿµŸàÿ±ÿ™ ÿ®ŸÜÿßŸÜ€í ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑÿ∫ŸÅÿßÿ±", transliteration: "Al-Ghaffar", sum: 1281, meaningUrdu: "ÿ®€Åÿ™ ÿ®ÿÆÿ¥ŸÜ€í ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑŸÇŸáÿßÿ±", transliteration: "Al-Qahhar", sum: 306, meaningUrdu: "ŸÇ€Åÿ± ŸÜÿßÿ≤ŸÑ ⁄©ÿ±ŸÜ€í ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑŸàŸáÿßÿ®", transliteration: "Al-Wahhab", sum: 14, meaningUrdu: "ÿ≥ÿ® ⁄©⁄Ü⁄æ ÿπÿ∑ÿß ⁄©ÿ±ŸÜ€í ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑÿ±ÿ≤ÿßŸÇ", transliteration: "Ar-Razzaq", sum: 308, meaningUrdu: "ÿ±ÿ≤ŸÇ ÿØ€åŸÜ€í ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑŸÅÿ™ÿßÿ≠", transliteration: "Al-Fattah", sum: 489, meaningUrdu: "⁄©⁄æŸàŸÑŸÜ€í ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑÿπŸÑŸäŸÖ", transliteration: "Al-Alim", sum: 150, meaningUrdu: "ÿ¨ÿßŸÜŸÜ€í ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑŸàÿØŸàÿØ", transliteration: "Al-Wadud", sum: 20, meaningUrdu: "ŸÖÿ≠ÿ®ÿ™ ⁄©ÿ±ŸÜ€í ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑŸÜŸàÿ±", transliteration: "An-Nur", sum: 256, meaningUrdu: "ÿ±Ÿàÿ¥ŸÜ ⁄©ÿ±ŸÜ€í ŸàÿßŸÑÿß" },
            { arabic: "ÿßŸÑŸáÿßÿØŸä", transliteration: "Al-Hadi", sum: 20, meaningUrdu: "€ÅÿØÿß€åÿ™ ÿØ€åŸÜ€í ŸàÿßŸÑÿß" }
        ];

        const traitsList = [
            {en: "Highly Driven", type: "Fire", ur: "Ÿæÿ±ÿ¨Ÿàÿ¥"}, {en: "Risk Taker", type: "Fire", ur: "ŸÜ⁄àÿ±"},
            {en: "Leadership", type: "Fire", ur: "ŸÇ€åÿßÿØÿ™"}, {en: "Brave", type: "Fire", ur: "ÿ®€ÅÿßÿØÿ±"},
            {en: "Competitive", type: "Fire", ur: "ŸÖŸÇÿßÿ®ŸÑ€Å Ÿæÿ≥ŸÜÿØ"},
            {en: "Social", type: "Air", ur: "ŸÖŸÑŸÜÿ≥ÿßÿ±"}, {en: "Creative", type: "Air", ur: "ÿ™ÿÆŸÑ€åŸÇ€å"},
            {en: "Talkative", type: "Air", ur: "ÿ®ÿßÿ™ŸàŸÜ€å"}, {en: "Witty", type: "Air", ur: "ÿ≠ÿßÿ∂ÿ± ÿ¨Ÿàÿßÿ®"},
            {en: "Charming", type: "Air", ur: "ÿØŸÑ⁄©ÿ¥"},
            {en: "Empathetic", type: "Water", ur: "€ÅŸÖÿØÿ±ÿØ"}, {en: "Intuitive", type: "Water", ur: "ÿ≠ÿ≥ÿßÿ≥"},
            {en: "Protective", type: "Water", ur: "ŸÖÿ≠ÿßŸÅÿ∏"}, {en: "Romantic", type: "Water", ur: "ÿ±ŸàŸÖÿßŸÜŸà€å"},
            {en: "Dreamer", type: "Water", ur: "ÿÆŸàÿßÿ® ÿØ€å⁄©⁄æŸÜ€í ŸàÿßŸÑÿß"},
            {en: "Stable", type: "Earth", ur: "ŸÖÿ≥ÿ™ÿ≠⁄©ŸÖ"}, {en: "Practical", type: "Earth", ur: "ÿπŸÖŸÑ€å"},
            {en: "Reliable", type: "Earth", ur: "ŸÇÿßÿ®ŸÑ ÿßÿπÿ™ŸÖÿßÿØ"}, {en: "Hardworking", type: "Earth", ur: "ŸÖÿ≠ŸÜÿ™€å"},
            {en: "Patient", type: "Earth", ur: "ÿµÿßÿ®ÿ±"}
        ];

        let selectedTraits = new Set();
        let chartInstance = null;
        let userData = { name: '', email: '' };

        function init() {
            const grid = document.getElementById('trait-grid');
            grid.innerHTML = '';
            [...traitsList].sort(() => Math.random() - 0.5).forEach(t => {
                const btn = document.createElement('button');
                btn.className = 'trait-card rounded-2xl p-4 h-28 flex flex-col items-center justify-center gap-1 text-center group cursor-pointer';
                btn.innerHTML = `
                    <span class="text-white font-bold text-sm md:text-base transition-colors font-sans">${t.en}</span>
                    <span class="urdu text-white/50 text-xs transition-colors">${t.ur}</span>
                `;
                btn.onclick = () => toggleTrait(btn, t.en);
                grid.appendChild(btn);
            });
        }

        function toggleTrait(btn, trait) {
            btn.classList.remove('animate-pop');
            void btn.offsetWidth; 
            btn.classList.add('animate-pop');

            if (selectedTraits.has(trait)) {
                selectedTraits.delete(trait);
                btn.classList.remove('trait-selected');
            } else {
                selectedTraits.add(trait);
                btn.classList.add('trait-selected');
            }
            document.getElementById('counter').innerText = selectedTraits.size;
        }

        function goToIntro() {
            const name = document.getElementById('reg-name').value;
            const email = document.getElementById('reg-email').value;
            if(!name || !email) return alert("Please complete your identity verification.");
            userData = { name, email };
            document.getElementById('intro-view').classList.add('hidden');
            document.getElementById('quiz-view').classList.remove('hidden');
        }

        function goToDateView() {
            if (selectedTraits.size < 3) return alert("Select at least 3 traits to proceed.");
            document.getElementById('quiz-view').classList.add('hidden');
            document.getElementById('date-view').classList.remove('hidden');
        }

        function backToQuiz() {
            document.getElementById('date-view').classList.add('hidden');
            document.getElementById('quiz-view').classList.remove('hidden');
        }

        function goToNameView() {
            const day = document.getElementById('birth-day').value;
            if(!day || day < 1 || day > 31) return alert("Enter a valid birth day.");
            document.getElementById('date-view').classList.add('hidden');
            document.getElementById('name-view').classList.remove('hidden');
        }

        function backToDate() {
            document.getElementById('name-view').classList.add('hidden');
            document.getElementById('date-view').classList.remove('hidden');
        }

        function updateLiveCalc(val) {
            const score = calculateAbjadScore(val);
            const preview = document.getElementById('live-calc-preview');
            document.getElementById('live-score').innerText = score;
            if(score > 0) preview.classList.remove('opacity-0');
            else preview.classList.add('opacity-0');
        }

        function calculateAbjadScore(name) {
            if (!name) return 0;
            const cleaned = name.replace(/[\u064B-\u065F\u0670\s]/g, '');
            const chars = cleaned.split('').filter(c => c.trim() !== '');
            return chars.reduce((acc, char) => acc + (ABJAD_MAP[char] || 0), 0);
        }

        function findMatches(sum) {
            const c = NAMES_OF_ALLAH;
            const single = c.filter(item => item.sum === sum);
            let nearest = null;
            if(single.length === 0) {
                 nearest = c.reduce((prev, curr) => Math.abs(curr.sum - sum) < Math.abs(prev.sum - sum) ? curr : prev);
            }
            return { single, nearest };
        }

        // --- NEW PROCESSING LOGIC ---
        function startProcessing() {
            const urduName = document.getElementById('user-name-urdu').value;
            if(!urduName) return alert("Please enter your name in Urdu.");

            document.getElementById('name-view').classList.add('hidden');
            document.getElementById('processing-view').classList.remove('hidden');

            const textEl = document.getElementById('process-text');
            const messages = ["Aligning Stars...", "Calculating Abjad...", "Synthesizing Soul..."];
            let i = 0;

            const interval = setInterval(() => {
                i++;
                if (i < messages.length) {
                    textEl.innerText = messages[i];
                }
            }, 800); // Change text every 800ms

            setTimeout(() => {
                clearInterval(interval);
                document.getElementById('processing-view').classList.add('hidden');
                revealDestiny(); // Show results
            }, 3000); // Total 3 seconds
        }

        function revealDestiny() {
            const month = parseInt(document.getElementById('birth-month').value);
            const day = parseInt(document.getElementById('birth-day').value);
            const urduName = document.getElementById('user-name-urdu').value;

            let scores = { Fire: 0, Air: 0, Water: 0, Earth: 0 };
            selectedTraits.forEach(trait => {
                const type = traitsList.find(t => t.en === trait).type;
                scores[type]++;
            });
            const sorted = Object.entries(scores).sort((a,b) => b[1] - a[1]);
            const winnerKey = sorted[0][0];
            const elemData = elements[winnerKey];
            const zodiac = getZodiacSign(day, month);
            const abjadSum = calculateAbjadScore(urduName);
            const matches = findMatches(abjadSum);

            document.getElementById('result-view').classList.remove('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });

            document.getElementById('final-user-name').innerText = userData.name;
            document.getElementById('final-user-email').innerText = userData.email;
            document.getElementById('display-name').innerText = urduName;
            
            document.getElementById('winner-name').innerText = winnerKey;
            document.getElementById('winner-urdu').innerText = elemData.urdu;
            document.getElementById('winner-icon').innerText = elemData.icon;
            document.getElementById('qualities-text').innerText = elemData.qualities;
            document.getElementById('challenges-text').innerText = elemData.challenges;
            document.getElementById('best-match').innerText = `${winnerKey} + ${elemData.match} ‚ù§Ô∏è`;
            document.getElementById('element-glow').style.background = elemData.color;

            document.getElementById('zodiac-name').innerText = zodiac.name;
            document.getElementById('zodiac-icon').innerText = zodiac.icon;
            document.getElementById('zodiac-date').innerText = `${zodiac.name} Season`;
            document.getElementById('zodiac-personality').innerText = zodiac.p;
            document.getElementById('zodiac-singing').innerText = zodiac.s;

            document.getElementById('abjad-input-name').innerText = urduName;
            document.getElementById('abjad-sum').innerText = abjadSum;
            
            const matchContainer = document.getElementById('abjad-matches');
            matchContainer.innerHTML = '';
            
            if(matches.single.length > 0) {
                matches.single.forEach(m => {
                    matchContainer.innerHTML += `
                        <div class="p-4 bg-white/5 rounded-lg border border-white/10">
                            <h5 class="text-3xl font-bold text-white mb-2">${m.arabic}</h5>
                            <p class="text-xs text-[#00f3ff] uppercase tracking-widest">${m.transliteration} (${m.sum})</p>
                            <p class="text-sm text-white/70 mt-2 urdu">${m.meaningUrdu}</p>
                        </div>
                    `;
                });
            } else if (matches.nearest) {
                const m = matches.nearest;
                 matchContainer.innerHTML += `
                        <div class="p-4 bg-white/5 rounded-lg border border-white/10">
                            <p class="text-[9px] uppercase tracking-widest text-emerald-400 mb-2">Nearest Resonance (${m.sum})</p>
                            <h5 class="text-3xl font-bold text-white mb-2">${m.arabic}</h5>
                            <p class="text-xs text-[#00f3ff] uppercase tracking-widest">${m.transliteration}</p>
                            <p class="text-sm text-white/70 mt-2 urdu">${m.meaningUrdu}</p>
                        </div>
                    `;
            }

            renderChart(scores);
        }

        function getZodiacSign(day, month) {
            if ((month == 12 && day >= 22) || (month == 1 && day <= 19)) return zodiacData.find(z => z.name === "Capricorn");
            for (let z of zodiacData) {
                if (z.name === "Capricorn") continue;
                if ((month == z.start.m && day >= z.start.d) || (month == z.end.m && day <= z.end.d)) return z;
            }
            return zodiacData[0];
        }

        function renderChart(scores) {
            const ctx = document.getElementById('elementChart').getContext('2d');
            if (chartInstance) chartInstance.destroy();
            
            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, 'rgba(0, 243, 255, 0.5)');
            gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');

            chartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: Object.keys(scores),
                    datasets: [{
                        label: 'Profile',
                        data: Object.values(scores),
                        backgroundColor: gradient,
                        borderColor: '#00f3ff',
                        borderWidth: 2,
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#00f3ff'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255,255,255,0.1)' },
                            grid: { color: 'rgba(255,255,255,0.05)' },
                            pointLabels: { color: '#888', font: { size: 10, family: 'Outfit' } },
                            ticks: { display: false, backdropColor: 'transparent' }
                        }
                    },
                    plugins: { legend: { display: false } },
                    animation: { duration: 2000, easing: 'easeOutQuart' }
                }
            });
        }

        function resetApp() {
            location.reload();
        }

        // Accordion Logic
        function toggleAccordion(header) {
            const content = header.nextElementSibling;
            header.classList.toggle('active');
            
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
                content.classList.remove('open');
            } else {
                // Close other sections
                document.querySelectorAll('.menu-content').forEach(c => {
                    c.style.maxHeight = null;
                    c.classList.remove('open');
                    c.previousElementSibling.classList.remove('active');
                });
                
                // Open clicked
                content.style.maxHeight = content.scrollHeight + "px";
                content.classList.add('open');
            }
        }

        function toggleMenu() {
            document.getElementById('side-menu').classList.toggle('open');
        }

        init();
    </script>
</body>
</html>